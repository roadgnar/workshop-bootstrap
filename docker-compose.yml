# Workshop Bootstrap - Docker Compose Configuration
# Repo-agnostic container setup

services:
  # Development service - supports any repo
  dev:
    build:
      context: .
      target: development
      args:
        BUILD_TIME: ${BUILD_TIME:-development}
        VERSION: ${VERSION:-1.0.0}
    container_name: workshop-dev
    volumes:
      - .:/workspace:cached
    ports:
      # Expose common ports for various services
      - "${PORT_1:-8080}:8080"     # Default web port
      - "${PORT_2:-5173}:5173"     # Vite dev server
      - "${PORT_3:-8000}:8000"     # FastAPI/backend
      - "${PORT_4:-3000}:3000"     # Alternative web port
    environment:
      - VERSION=${VERSION:-1.0.0}
      - SELECTED_REPO=${SELECTED_REPO:-}
      - VITE_MAPBOX_TOKEN=${VITE_MAPBOX_TOKEN:-}
      - FLASK_ENV=development
    working_dir: /workspace
    command: sleep infinity
    restart: unless-stopped

# Named volumes for persistent data (if needed in future)
volumes:
  workspace-cache:
